/* OpponentDrawAnimation Component Styles */
/* 重新設計：階段式動畫 (showing → flying) */

.opponent-draw {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  pointer-events: none;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ===== 半透明遮罩 ===== */
.opponent-draw__overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  animation: overlay-fade 1.2s ease-out forwards;
  z-index: 999;
}

@keyframes overlay-fade {
  0% { opacity: 0; }
  20% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}

/* ===== 頂部公告橫幅 ===== */
.opponent-draw__banner {
  position: fixed;
  top: 12%;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, rgba(76, 175, 80, 0.95), rgba(56, 142, 60, 0.95));
  padding: 1rem 2.5rem;
  border-radius: 2rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  box-shadow:
    0 8px 32px rgba(76, 175, 80, 0.5),
    0 0 80px rgba(76, 175, 80, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  animation: banner-appear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  z-index: 1002;
  border: 2px solid rgba(255, 255, 255, 0.4);
}

.opponent-draw__banner-icon {
  font-size: 2.2rem;
  animation: banner-icon-bounce 0.8s ease-out;
}

.opponent-draw__banner-text {
  color: white;
  font-size: 1.5rem;
  font-weight: 700;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  white-space: nowrap;
}

@keyframes banner-appear {
  0% {
    transform: translateX(-50%) translateY(-50px) scale(0.5);
    opacity: 0;
  }
  60% {
    transform: translateX(-50%) translateY(10px) scale(1.1);
    opacity: 1;
  }
  100% {
    transform: translateX(-50%) translateY(0) scale(1);
    opacity: 1;
  }
}

@keyframes banner-icon-bounce {
  0%, 100% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.4) rotate(-15deg); }
  50% { transform: scale(1.3) rotate(15deg); }
  75% { transform: scale(1.15) rotate(-5deg); }
}

/* ===== 卡片容器 ===== */
.opponent-draw__card-wrapper {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  z-index: 1001;
}

/* ===== 閃光效果 ===== */
.opponent-draw__glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 400px;
  height: 400px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(76, 175, 80, 0.9) 0%,
    rgba(76, 175, 80, 0.6) 25%,
    rgba(76, 175, 80, 0.3) 50%,
    transparent 70%
  );
  animation: glow-pulse 1.2s ease-out forwards;
  pointer-events: none;
  z-index: -1;
}

.opponent-draw__glow::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border: 4px solid rgba(76, 175, 80, 0.9);
  animation: glow-ring 1s ease-out forwards;
}

@keyframes glow-pulse {
  0% {
    transform: translate(-50%, -50%) scale(0.2);
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(2);
    opacity: 0;
  }
}

@keyframes glow-ring {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 1;
    border-width: 10px;
  }
  100% {
    transform: translate(-50%, -50%) scale(2);
    opacity: 0;
    border-width: 1px;
  }
}

/* ===== 卡片本身 ===== */
.opponent-draw__card {
  transform-origin: center center;
  filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
}

/* ===== 卡片標籤 ===== */
.opponent-draw__label {
  padding: 0.7rem 1.4rem;
  background: rgba(0, 0, 0, 0.85);
  color: white;
  border-radius: 2rem;
  font-size: 1.1rem;
  font-weight: 600;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.opponent-draw__label--highlight {
  background: linear-gradient(135deg, rgba(76, 175, 80, 0.95), rgba(56, 142, 60, 0.95));
  box-shadow: 0 0 30px rgba(76, 175, 80, 0.6);
}

.opponent-draw__icon {
  font-size: 1.3rem;
}

/* ===== 飛行軌跡 ===== */
.opponent-draw__trail {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 3px;
  height: 150px;
  background: linear-gradient(
    to top,
    transparent,
    rgba(76, 175, 80, 0.8),
    rgba(76, 175, 80, 0.4),
    transparent
  );
  transform-origin: bottom center;
  animation: trail-fade 1s ease-out forwards;
  z-index: 998;
}

@keyframes trail-fade {
  0% {
    opacity: 1;
    transform: translateX(-50%) scaleY(0);
  }
  50% {
    opacity: 0.8;
    transform: translateX(-50%) scaleY(1);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) scaleY(1.5);
  }
}

/* ============================================ */
/* ===== 階段動畫: showing (顯示階段) ===== */
/* ============================================ */

.opponent-draw--showing .opponent-draw__card-wrapper {
  animation: card-showing 1.2s ease-out forwards;
}

@keyframes card-showing {
  0% {
    transform: scale(0.3) rotate(-10deg);
    opacity: 0;
  }
  40% {
    transform: scale(1.3) rotate(3deg);
    opacity: 1;
  }
  60% {
    transform: scale(1.2) rotate(-2deg);
  }
  100% {
    transform: scale(1.15) rotate(0deg);
    opacity: 1;
  }
}

/* 拿棄牌的 showing 動畫 - 更大更明顯 */
.opponent-draw--discard.opponent-draw--showing .opponent-draw__card-wrapper {
  animation: card-showing-discard 1.2s ease-out forwards;
}

@keyframes card-showing-discard {
  0% {
    transform: scale(0.2) rotate(-15deg);
    opacity: 0;
    filter: brightness(2);
  }
  30% {
    transform: scale(1.5) rotate(5deg);
    opacity: 1;
    filter: brightness(1.5) drop-shadow(0 0 40px rgba(76, 175, 80, 0.9));
  }
  60% {
    transform: scale(1.35) rotate(-3deg);
    filter: brightness(1.2) drop-shadow(0 0 25px rgba(76, 175, 80, 0.7));
  }
  100% {
    transform: scale(1.25) rotate(0deg);
    opacity: 1;
    filter: brightness(1.1) drop-shadow(0 0 15px rgba(76, 175, 80, 0.5));
  }
}

/* ============================================ */
/* ===== 階段動畫: flying (飛行階段) ===== */
/* ============================================ */

/* 飛向上方 */
.opponent-draw--top.opponent-draw--flying .opponent-draw__card-wrapper {
  animation: fly-to-top 1.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fly-to-top {
  0% {
    transform: scale(1.15) translateY(0);
    opacity: 1;
  }
  30% {
    transform: scale(1) translateY(-50px);
    opacity: 1;
  }
  100% {
    transform: scale(0.3) translateY(-350px);
    opacity: 0;
  }
}

/* 飛向左側 */
.opponent-draw--left.opponent-draw--flying .opponent-draw__card-wrapper {
  animation: fly-to-left 1.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fly-to-left {
  0% {
    transform: scale(1.15) translate(0, 0);
    opacity: 1;
  }
  30% {
    transform: scale(1) translate(-80px, -30px);
    opacity: 1;
  }
  100% {
    transform: scale(0.3) translate(-450px, -200px);
    opacity: 0;
  }
}

/* 飛向右側 */
.opponent-draw--right.opponent-draw--flying .opponent-draw__card-wrapper {
  animation: fly-to-right 1.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fly-to-right {
  0% {
    transform: scale(1.15) translate(0, 0);
    opacity: 1;
  }
  30% {
    transform: scale(1) translate(80px, -30px);
    opacity: 1;
  }
  100% {
    transform: scale(0.3) translate(450px, -200px);
    opacity: 0;
  }
}

/* 拿棄牌的飛行動畫 - 更慢更有感覺 */
.opponent-draw--discard.opponent-draw--top.opponent-draw--flying .opponent-draw__card-wrapper {
  animation: fly-discard-to-top 1.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fly-discard-to-top {
  0% {
    transform: scale(1.25) translateY(0);
    opacity: 1;
    filter: drop-shadow(0 0 20px rgba(76, 175, 80, 0.6));
  }
  20% {
    transform: scale(1.1) translateY(-30px);
    opacity: 1;
    filter: drop-shadow(0 0 15px rgba(76, 175, 80, 0.4));
  }
  100% {
    transform: scale(0.25) translateY(-400px);
    opacity: 0;
    filter: drop-shadow(0 0 5px rgba(76, 175, 80, 0.2));
  }
}

.opponent-draw--discard.opponent-draw--left.opponent-draw--flying .opponent-draw__card-wrapper {
  animation: fly-discard-to-left 1.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fly-discard-to-left {
  0% {
    transform: scale(1.25) translate(0, 0);
    opacity: 1;
    filter: drop-shadow(0 0 20px rgba(76, 175, 80, 0.6));
  }
  20% {
    transform: scale(1.1) translate(-60px, -20px);
    opacity: 1;
    filter: drop-shadow(0 0 15px rgba(76, 175, 80, 0.4));
  }
  100% {
    transform: scale(0.25) translate(-500px, -220px);
    opacity: 0;
    filter: drop-shadow(0 0 5px rgba(76, 175, 80, 0.2));
  }
}

.opponent-draw--discard.opponent-draw--right.opponent-draw--flying .opponent-draw__card-wrapper {
  animation: fly-discard-to-right 1.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fly-discard-to-right {
  0% {
    transform: scale(1.25) translate(0, 0);
    opacity: 1;
    filter: drop-shadow(0 0 20px rgba(76, 175, 80, 0.6));
  }
  20% {
    transform: scale(1.1) translate(60px, -20px);
    opacity: 1;
    filter: drop-shadow(0 0 15px rgba(76, 175, 80, 0.4));
  }
  100% {
    transform: scale(0.25) translate(500px, -220px);
    opacity: 0;
    filter: drop-shadow(0 0 5px rgba(76, 175, 80, 0.2));
  }
}

/* ===== 標籤動畫 ===== */
.opponent-draw--showing .opponent-draw__label {
  animation: label-appear 0.5s ease-out forwards;
}

.opponent-draw--flying .opponent-draw__label {
  animation: label-disappear 0.4s ease-out forwards;
}

@keyframes label-appear {
  0% {
    transform: translateY(20px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes label-disappear {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(-10px);
    opacity: 0;
  }
}

/* 橫幅在飛行階段消失 */
.opponent-draw--flying .opponent-draw__banner {
  animation: banner-disappear 0.5s ease-out forwards;
}

@keyframes banner-disappear {
  0% {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(-50%) translateY(-30px);
    opacity: 0;
  }
}

/* ===== 響應式設計 ===== */
@media (max-width: 768px) {
  .opponent-draw__banner {
    padding: 0.8rem 1.5rem;
    top: 8%;
  }

  .opponent-draw__banner-icon {
    font-size: 1.6rem;
  }

  .opponent-draw__banner-text {
    font-size: 1.2rem;
  }

  .opponent-draw__glow {
    width: 250px;
    height: 250px;
  }

  .opponent-draw__label {
    font-size: 0.95rem;
    padding: 0.5rem 1rem;
  }

  /* 縮小飛行距離 */
  @keyframes fly-to-top {
    100% {
      transform: scale(0.3) translateY(-250px);
      opacity: 0;
    }
  }

  @keyframes fly-to-left {
    100% {
      transform: scale(0.3) translate(-300px, -150px);
      opacity: 0;
    }
  }

  @keyframes fly-to-right {
    100% {
      transform: scale(0.3) translate(300px, -150px);
      opacity: 0;
    }
  }

  @keyframes fly-discard-to-top {
    100% {
      transform: scale(0.25) translateY(-280px);
      opacity: 0;
    }
  }

  @keyframes fly-discard-to-left {
    100% {
      transform: scale(0.25) translate(-320px, -160px);
      opacity: 0;
    }
  }

  @keyframes fly-discard-to-right {
    100% {
      transform: scale(0.25) translate(320px, -160px);
      opacity: 0;
    }
  }
}

/* ===== 無障礙：減少動畫 ===== */
@media (prefers-reduced-motion: reduce) {
  .opponent-draw__card-wrapper,
  .opponent-draw__label,
  .opponent-draw__glow,
  .opponent-draw__banner,
  .opponent-draw__overlay,
  .opponent-draw__trail {
    animation: none !important;
  }

  .opponent-draw--showing .opponent-draw__card-wrapper,
  .opponent-draw--flying .opponent-draw__card-wrapper {
    animation: none !important;
    opacity: 1;
  }
}
